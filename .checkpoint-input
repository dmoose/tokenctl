schema_version: "1"
timestamp: "2026-02-07T12:22:09-08:00"
commit_hash: ""

changes:
  - summary: Add version command with build-time info
    details: |
      Added tokenctl version command showing version, git commit, and build time.
      Makefile now injects version info via ldflags during build and install.
    change_type: feature
    scope: cmd/tokenctl

  - summary: Add body background and foreground colors to CSS reset
    details: |
      Body element now sets background-color: var(--color-background) and
      color: var(--color-foreground) in the reset layer. Ensures theme colors
      apply immediately without requiring additional CSS.
    change_type: fix
    scope: pkg/generators

  - summary: Support dual theme directory layouts in loader
    details: |
      LoadThemes now checks both rootPath/themes/ and rootPath/tokens/themes/.
      Supports both "tokenctl build tokens" (tokens dir) and "tokenctl build ."
      (project root) invocations.
    change_type: fix
    scope: pkg/tokens

  - summary: Remove completed AUDIT_TODO.md
    details: All 34 audit items have been addressed; tracking file no longer needed.
    change_type: other
    scope: docs

context:
  problem_statement: |
    Dogfooding revealed theme colors weren't applying to body element, requiring
    manual CSS. Also needed version command for troubleshooting and dual theme
    path support for different project layouts.

  key_insights:
    - insight: CSS reset should set structural colors on body element
      impact: Theme switching works immediately without user adding body styles
      scope: project

    - insight: Token directory can be passed directly or as project root
      impact: Loader needs to handle both layouts for flexible CLI usage
      scope: checkpoint

  decisions_made:
    - decision: Body reset uses CSS variables, not hardcoded colors
      rationale: Allows theme switching to work without CSS specificity issues
      scope: project

  established_patterns:
    - pattern: Build-time version injection via ldflags
      rationale: Standard Go pattern for embedding version info without config files
      examples: "go build -ldflags '-X main.version=...' "
      scope: project

next_steps:
  - summary: Document states section in token format documentation
    details: Update TOKENS.md to show states alongside variants and sizes
    priority: med
    scope: docs
